<!DOCTYPE html>
<meta charset="utf-8">
<head>
    <link type="text/css" href="gp-style.css" rel="stylesheet"/>
</head>
<body>
<div class="container">
    <div>
        <div id="gp-controllers" class="top-controllers">
            <ul>
                <li><label for="tax-search">Search Species:</label>
                    <input type="text" id="tax-search">
                </li>
                <li><label for="gp-selector">Genome Properties:</label>
                    <div id="gp-selector" class="selector"></div>

                </li>
                <li><label for="gp-filter">Filter Genome Properties:</label>
                    <input type="text" id="gp-filter">
                </li>
                <li><label for="collapse_tree">Collapse tree:</label><input type="checkbox" id="collapse_tree" checked="checked"/></li>
            </ul>
            <div class="gp-legends"></div>
        </div>
    </div>
    <div id="gp-viewer"></div>
    <div class="info-tooltip"></div>
</div>
<script src="bin/d3.custom.min.js"></script>
<script>
    var d3 = gpv.d3,
            GenomePropertiesViewer = gpv.GenomePropertiesViewer,
            viewer = new GenomePropertiesViewer({
                element_selector: "#gp-viewer",
                controller_element_selector: "#gp-selector"
            });
    viewer.update_viewer();
    d3.select("#upload-button").on("click", function() {
        var ids = d3.select("#tax-ids-text").node().value
                .split(/[\s,-]/)
                .filter(function(e) { return e.trim().length>0;});
        for (var i =0;i<ids.length;i++){
            var id = ids[i];
            viewer.load_genome_properties_file(id.trim());
        }

    });
    d3.select("#order").on("change", function() {
        viewer.order_organisms(this.value);
    });
    d3.select("#collapse_tree").on("change", function() {
        viewer.gp_taxonomy.collapse_tree = d3.select(this).property('checked');
        viewer.update_viewer();
    });

</script>
</body>